doctype html
html(lang='ja')
  head
    meta(charset='UTF-8')
    title= title + ' - Sharetary'
    meta(name='viewport', content='width=device-width, initial-scale=1.0')
    link(rel='stylesheet', type='text/css', href='/css/bootstrap.min.css')
    link(rel='stylesheet', type='text/css', href='/css/bootstrap-theme.min.css')
  body
    .navbar.navbar-default.navbar-static-top
      .container
        .navbar-header
          a.navbar-brand(href='/') Sharetary
        #navbar.navbar-collapse.collapse
          ul.nav.navbar-nav
            - var classesForTimeline = active == '/timeline' ? 'active' : '';
            - var classesForArchive = active == '/archive' ? 'active' : '';
            li(class=classesForTimeline)
              a(href='/timeline') Timeline view
            li(class=classesForArchive)
              a(href='/archive') Archive view

    .container
      h1= title

      mixin eventItem(event, level)
        - var paddingClass = 'col-md-' + level;
        - var columnClass = 'col-md-' + (12 - level);
        - var itemClass = event.parent ? 'panel-info' : 'panel-default' ;
        .row(id=event._key)
          if level
            div(class=paddingClass)
          div(class=columnClass)
            .panel(class=itemClass)
              .panel-heading
                a(href=event.uri)
                  != event.title
                  span.text-muted= ', by ' + event.author
              .panel-body
                p= event.description
                .row.small
                  .col-md-6.text-muted= (new Date(event.timestamp)).toLocaleString()
                  if event.parentEvent
                    .col-md-6.text-right
                      a(href='#' + event.parentEvent._key)= '\u203A ' + event.parentEvent.title
        if tree && event.children
          each childEvent in event.children
            +eventItem(childEvent, level + 1)

      each event in events
        +eventItem(event, 0)

    script(type='text/javascript', src='/js/bootstrap.min.js')
