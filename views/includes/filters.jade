mixin filtersButton
  button.btn.btn-default.navbar-btn(type='button', data-toggle='modal', data-target='#filters') Filters

mixin filtersDialog
  #filters.modal.fade(role='dialog', aria-hidden='true')
    form(method='GET', action=current)
      .modal-dialog
        .modal-content
          .modal-header
            button.close(type='button', data-dismiss='modal', aria-label='Close')
              span(aria-hidden='true') &times;
            h2.modal-title Filters
          .modal-body
            p.input-group
              label.input-group-addon(for='filter-searchTerm') Keywords
              input#filter-searchTerm.form-control(name='searchTerm', value=filters.searchTerm || '', placeholder='Terms to be searched')
            div.panel.panel-default
              div.panel-heading(role='tab')
                h3.panel-title
                  a#filter-actors-container-toggler(data-toggle='collapse',
                                                    href='#filter-actors-container',
                                                    aria-controls='filter-actors-container')
                    | Actors
              div#filter-actors-container.panel-collapse.collapse(role='tabpanel',
                                                                  aria-labelledby='filter-actors-container-toggler')
                div.panel-body
                  input(type='hidden', id='filter-actors', name='actors', value=filters.actors.join(','))
                  each actor in actors
                    span(style='white-space: nowrap; vertical-align: middle')
                      input(type='checkbox',
                            id='filter-actors-item-' + escape(actor._key),
                            checked=(filters.actors.indexOf(actor._key) > -1)
                            data-actor=actor._key)
                      label(for='filter-actors-item-' + escape(actor._key))
                        if actor.icon
                          img.actor-icon(src=actor.icon, alt='')
                        else
                          span.glyphicon.glyphicon-user(aria-hidden='true')
                        != actor._key + '(' + actor._nsubrecs + ')'
                    |  
            div.panel.panel-default
              div.panel-heading(role='tab')
                h3.panel-title
                  a#filter-tags-container-toggler(data-toggle='collapse',
                                                  href='#filter-tags-container',
                                                  aria-controls='filter-tags-container')
                    | Tags
              div#filter-tags-container.panel-collapse.collapse(role='tabpanel',
                                                                aria-labelledby='filter-tags-container-toggler')
                div.panel-body
                  input(type='hidden', id='filter-tags', name='tags', value=filters.tags.join(','))
                  each tag in tags
                    span(style='white-space: nowrap; vertical-align: middle')
                      input(type='checkbox',
                            id='filter-tags-item-' + escape(tag._key),
                            checked=(filters.tags.indexOf(tag._key) > -1)
                            data-tag=tag._key)
                      label(for='filter-tags-item-' + escape(tag._key))
                        if tag.icon
                          img.tag-icon(src=tag.icon, alt='')
                        else
                          span.glyphicon.glyphicon-tag(aria-hidden='true')
                        != tag._key + '(' + tag._nsubrecs + ')'
                    |  
            p.input-group
              != 'From '
              input#filter-after(type='hidden', name='after', value=filters.after)
              input#filter-after-year(placeholder='YYYY', type='number', style='width:5em')
              | -
              input#filter-after-month(placeholder='MM', type='number', style='width:3em')
              | -
              input#filter-after-date(placeholder='DD', type='number', style='width:3em')
              |  
              input#filter-after-hour(placeholder='hh', type='number', style='width:3em')
              | :
              input#filter-after-minute(placeholder='mm', type='number', style='width:3em')
              | :
              input#filter-after-second(placeholder='ss', type='number', style='width:3em')
              | (Oldest timestamp)
            p.input-group
              != ' To '
              input#filter-before(type='hidden', name='before', value=filters.before)
              input#filter-before-year(placeholder='YYYY', type='number', style='width:5em')
              | -
              input#filter-before-month(placeholder='MM', type='number', style='width:3em')
              | -
              input#filter-before-date(placeholder='DD', type='number', style='width:3em')
              |  
              input#filter-before-hour(placeholder='hh', type='number', style='width:3em')
              | :
              input#filter-before-minute(placeholder='mm', type='number', style='width:3em')
              | :
              input#filter-before-second(placeholder='ss', type='number', style='width:3em')
              | (Latest timestamp)
          .modal-footer
            .row
              .col-md-6.text-left
                a.btn.btn-default(href=current) Clear All
              .col-md-6.text-right
                button.btn.btn-default(type='button', data-dismiss='modal') Cancel
                input.btn.btn-primary(type='submit', value='Apply')
