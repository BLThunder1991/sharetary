#!/usr/bin/env node
// -*- js -*-

var express      = require('express'),
    http         = require('http'),
    path         = require('path');

var application = express();
var server = http.createServer(application);

// application.enable('trust proxy');

var baseDir = path.join(__dirname, '..');
application.set('views', path.join(baseDir, 'views'));
application.set('view engine', 'jade');

application.get('/', function(request, response) {
  response.redirect('/timeline');
});
application.get('/timeline', function(request, response) {
  response.render('timeline', { title: 'Timeline' });
});
application.get('/archive', function(request, response) {
  response.render('archive', { title: 'Archive' });
});

server.on('error', function(error) {
  server.close();
});
server.listen(11041, '0.0.0.0');

process.on('SIGINT', function() {
  server.close();
});

process.on('SIGTERM', function() {
  server.close();
});
